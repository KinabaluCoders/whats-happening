<html>
<head>

    <script type='text/javascript' src='../jquery/jquery-2.1.1.min.js'></script>

</head>

<body>

    <p>The following text should say "No events listed" followed by 3 events:</p>

    <ul id="gcal-events">
      <li>No events listed</li>
    </ul>
 
    <script type="text/javascript" charset="utf-8">

    $(document).ready(function($){

        var FEED_URL = "https://www.google.com/calendar/feeds/tuhau.net_j88fansm5gtuopgeqvccbdmid4%40group.calendar.google.com/public/basic"
        $.ajax({
            url      : document.location.protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(FEED_URL),
            dataType : 'json',
            cache    : false,
            success  : function (data) {
                if (data.responseData.feed && data.responseData.feed.entries) {
                    jQuery("#gcal-events").empty();

                    $.each(data.responseData.feed.entries, function (i, e) {

                        console.log("------------------------");
                        console.log("title      : " + e.title);
                        console.log("author     : " + e.author);

                        // hacky extraction of event description from e.content
                        var text_description = "Event Description: ";
                        var start_of_description = e.content.indexOf(text_description);
                        description_only = e.content.substring(start_of_description + text_description.length);

                        jQuery("#gcal-events").append( "<li>" + e.title + "<p>" + description_only + "</p></li>" );
                    });
                }
            }
        })

    });

    </script>
    
</body>
</html>